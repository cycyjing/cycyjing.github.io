<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js | Yang&#39;s Blog</title>
    <meta name="description" content="A passionate and adorable girl&#39;s blog">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.327ecfba.css" as="style"><link rel="preload" href="/assets/js/app.58ea3618.js" as="script"><link rel="preload" href="/assets/js/4.e18734fe.js" as="script"><link rel="preload" href="/assets/js/1.5515fbc7.js" as="script"><link rel="preload" href="/assets/js/20.523ad5a5.js" as="script"><link rel="prefetch" href="/assets/js/10.950b0a81.js"><link rel="prefetch" href="/assets/js/11.ff0a8963.js"><link rel="prefetch" href="/assets/js/12.7a31e56e.js"><link rel="prefetch" href="/assets/js/13.793ff829.js"><link rel="prefetch" href="/assets/js/14.4a2df5c9.js"><link rel="prefetch" href="/assets/js/15.adb671e0.js"><link rel="prefetch" href="/assets/js/16.6ae61159.js"><link rel="prefetch" href="/assets/js/17.3b7c69c4.js"><link rel="prefetch" href="/assets/js/18.bc0707e7.js"><link rel="prefetch" href="/assets/js/19.b51cf22e.js"><link rel="prefetch" href="/assets/js/21.9f05fe89.js"><link rel="prefetch" href="/assets/js/22.5b20023a.js"><link rel="prefetch" href="/assets/js/23.9afbc62b.js"><link rel="prefetch" href="/assets/js/24.5db4f0c7.js"><link rel="prefetch" href="/assets/js/25.0b7b7ec7.js"><link rel="prefetch" href="/assets/js/26.03ab96db.js"><link rel="prefetch" href="/assets/js/27.20e9bd27.js"><link rel="prefetch" href="/assets/js/28.e7df7184.js"><link rel="prefetch" href="/assets/js/29.e760f5d9.js"><link rel="prefetch" href="/assets/js/30.f500117d.js"><link rel="prefetch" href="/assets/js/31.1c0b776b.js"><link rel="prefetch" href="/assets/js/5.200fa559.js"><link rel="prefetch" href="/assets/js/6.ffdaf0fa.js"><link rel="prefetch" href="/assets/js/7.d3ef2766.js"><link rel="prefetch" href="/assets/js/8.a0b5a062.js"><link rel="prefetch" href="/assets/js/9.c5f788e4.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.2553b2f0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.327ecfba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.jpg" alt="Yang's Blog" class="logo"> <span class="site-name">Yang's Blog</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front-end.html" class="nav-link"><i class="iconfont undefined"></i>
  Front-end
</a></li><li class="dropdown-item"><!----> <a href="/category/Notes.html" class="nav-link"><i class="iconfont undefined"></i>
  Notes
</a></li><li class="dropdown-item"><!----> <a href="/category/Information Technology.html" class="nav-link"><i class="iconfont undefined"></i>
  Information Technology
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/views/other/aboutMe.html" class="nav-link"><i class="iconfont reco-account"></i>
  My CV
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cycyjing" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/ycui-520/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont iconfontMy icon-linkedin1"></i>
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front-end.html" class="nav-link"><i class="iconfont undefined"></i>
  Front-end
</a></li><li class="dropdown-item"><!----> <a href="/category/Notes.html" class="nav-link"><i class="iconfont undefined"></i>
  Notes
</a></li><li class="dropdown-item"><!----> <a href="/category/Information Technology.html" class="nav-link"><i class="iconfont undefined"></i>
  Information Technology
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/views/other/aboutMe.html" class="nav-link"><i class="iconfont reco-account"></i>
  My CV
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cycyjing" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/ycui-520/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont iconfontMy icon-linkedin1"></i>
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/Notes/2019/Node.js.html#轮询机制" class="sidebar-link">轮询机制</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/Notes/2019/Node.js.html#模块化" class="sidebar-link">模块化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#fs-文件读写" class="sidebar-link">fs 文件读写</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#global-全局变量" class="sidebar-link">global 全局变量</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#path-路径操作" class="sidebar-link">path 路径操作</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#process-进程" class="sidebar-link">process 进程</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#querystring" class="sidebar-link">querystring</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#event" class="sidebar-link">event</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#v8-引擎" class="sidebar-link">V8 引擎</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#vm-虚拟机" class="sidebar-link">vm 虚拟机</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#zlib-压缩" class="sidebar-link">zlib 压缩</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#基础模块" class="sidebar-link">基础模块</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#http" class="sidebar-link">http</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#http2" class="sidebar-link">http2</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#https" class="sidebar-link">https</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#调试器-debugger-知道即可" class="sidebar-link">调试器 debugger 知道即可</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#assert" class="sidebar-link">assert</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#buffer" class="sidebar-link">Buffer</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#stream-流" class="sidebar-link">stream 流</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#crypto-加密" class="sidebar-link">crypto 加密</a></li><li class="sidebar-sub-header"><a href="/views/Notes/2019/Node.js.html#express" class="sidebar-link">express</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>Node.js</h1> <hr> <div data-v-0b496ca7><i class="iconfont reco-account" data-v-0b496ca7><span data-v-0b496ca7>Yang Cui</span></i> <i class="iconfont reco-date" data-v-0b496ca7><span data-v-0b496ca7>2019-8-18</span></i> <!----> <i class="iconfont reco-tag tags" data-v-0b496ca7><span class="tag-item" data-v-0b496ca7>
      Node.js
    </span><span class="tag-item" data-v-0b496ca7>
      Notes
    </span></i></div></div> <div class="content__default"><h1 id="node-js"><a href="#node-js" aria-hidden="true" class="header-anchor">#</a> Node.js</h1> <p>require(): 记得写后缀名</p> <p>module.exports/exports: 都可以导出，不过两个不能同时使用。若同时使用，module.exports 会覆盖 exports。exports 优势在于可以写多个对象，最后会合并为一个输出</p> <h2 id="轮询机制"><a href="#轮询机制" aria-hidden="true" class="header-anchor">#</a> 轮询机制</h2> <p>回调顺序</p> <ol><li>setInterval() / setTimeout()</li> <li>普通方法回调，Promise 方法里是同步，.then()方法内是异步</li> <li>process.nextTick(callback,[args])</li> <li>setImmediate()</li></ol> <h2 id="模块化"><a href="#模块化" aria-hidden="true" class="header-anchor">#</a> 模块化</h2> <h3 id="fs-文件读写"><a href="#fs-文件读写" aria-hidden="true" class="header-anchor">#</a> fs 文件读写</h3> <p>fs.readFile(path,[option],callback)</p> <p>fs.writeFile(path,data,[option],callback)</p> <p>fs.Stats: 对象 关于文件的信息 .stat(path,callback(err,state))</p> <p>fs.access(): 性质（是否存在/可读/可写）</p> <p>fs.mkdir()</p> <p>fs.rmdir()</p> <p>fs.open()</p> <h3 id="global-全局变量"><a href="#global-全局变量" aria-hidden="true" class="header-anchor">#</a> global 全局变量</h3> <p>不用引用就可以使用</p> <p>__dirname: 执行这个变量的文件夹所在的绝对位置</p> <p>__filename: 执行这个变量的文件所在的绝对位置</p> <p>exports</p> <p>module</p> <p>require</p> <p>process</p> <p>console：.time() .timeEnd()</p> <p>buffer</p> <h3 id="path-路径操作"><a href="#path-路径操作" aria-hidden="true" class="header-anchor">#</a> path 路径操作</h3> <p>path.join():</p> <p>path.resolve(): 补充绝对路径</p> <p>path.extname(): 查看后缀名</p> <p>path.basename():</p> <h3 id="process-进程"><a href="#process-进程" aria-hidden="true" class="header-anchor">#</a> process 进程</h3> <p>process.argv: 查询到软件安装绝对路径，及所在文件的绝对路径</p> <p>process.env: 当前用户环境对象，也可以向环境中添加属性，用 delete.~可以删除</p> <p>process.exit(): 0 是正常退出，1 是异常退出</p> <p>process.memoryUsage(): 和上面方法匹配使用</p> <p>process.emitWarning(string)</p> <p>process.on(event,callback)</p> <p>process.nextTick(callback,[args]): 进入下一个轮询</p> <p>process.kill(pid,[signal]): pid 进程 ID，这个方法是杀死进程</p> <p>process.platform</p> <h3 id="querystring"><a href="#querystring" aria-hidden="true" class="header-anchor">#</a> querystring</h3> <p>.parse(str, [sep, eq, options])：URL 查询字符串 <code>str</code> 解析为键值对的集合</p> <p>.stringify(obj,[str,eq,option])：通过迭代对象的自身属性从给定的 <code>obj</code> 生成 URL 查询字符串</p> <h3 id="event"><a href="#event" aria-hidden="true" class="header-anchor">#</a> event</h3> <p>给同一个对象最多绑定 10 个事件，超过报错，防止内存溢出。如果想要改变，setMaxListeners()</p> <p>addListener() / removeListener() / removeAllListener</p> <p>on() /off()</p> <p>.prependListener(): 在所有事件最前端</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> EmitEvent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//继承</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">EmitEvent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//定义前后触发的接口，名字要一致</span>
  <span class="token function">growUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token comment">// 定义何时触发</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;growUp&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">&quot;rain&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义何时监听</span>
a<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;growUp&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">growUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义何时移除监听</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="v8-引擎"><a href="#v8-引擎" aria-hidden="true" class="header-anchor">#</a> V8 引擎</h3> <h3 id="vm-虚拟机"><a href="#vm-虚拟机" aria-hidden="true" class="header-anchor">#</a> vm 虚拟机</h3> <h3 id="zlib-压缩"><a href="#zlib-压缩" aria-hidden="true" class="header-anchor">#</a> zlib 压缩</h3> <h3 id="基础模块"><a href="#基础模块" aria-hidden="true" class="header-anchor">#</a> 基础模块</h3> <ul><li>net 知道就可以，现在用 http 多</li></ul> <p>用户安装/保存文件，视频/音乐文档用的多</p> <p>TCP, IPC 服务器</p> <ul><li><p>dns：.resolve6(hostname, [option],callback)</p></li> <li><p>domain 已经全部废弃</p></li> <li><p>tls 安全传输</p></li></ul> <h3 id="http"><a href="#http" aria-hidden="true" class="header-anchor">#</a> http</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http
  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//缺点比下面慢</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;dfdfd&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;dfdfd&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;dfdfd&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//速度快 缺点极好服务器内存和资源</span>
    <span class="token comment">// const rs = fs.createReadStream('./index.html')</span>
    <span class="token comment">// rs.pipe(res)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="http2"><a href="#http2" aria-hidden="true" class="header-anchor">#</a> http2</h3> <h3 id="https"><a href="#https" aria-hidden="true" class="header-anchor">#</a> https</h3> <h3 id="调试器-debugger-知道即可"><a href="#调试器-debugger-知道即可" aria-hidden="true" class="header-anchor">#</a> 调试器 debugger 知道即可</h3> <h3 id="assert"><a href="#assert" aria-hidden="true" class="header-anchor">#</a> assert</h3> <p>异常 测试</p> <p>.assert/ok(value,[message]): value/bool</p> <p>.equal(actual,expect,[message]): 相当于<code>==</code></p> <p>.deepEqual(actual,expect,[message]): 相当于<code>==</code>，会对结构进行比较，不会比较原型链</p> <p>.strictEqual(actual,expect,[message]): 相当于<code>===</code>，</p> <p>.deepStrictEqual(actual,expect,[message]):</p> <p>.isError(value): 有错误就把这个错误抛除去</p> <p>.fail(message): 永远会出错，直接抛错误信息</p> <p>.throws(fn,[error,message]):</p> <p>.doesNotThrow():</p> <h3 id="buffer"><a href="#buffer" aria-hidden="true" class="header-anchor">#</a> Buffer</h3> <p>.alloc()</p> <p>.allocUnsafe()</p> <p>.from()</p> <p>.fill()</p> <p>.isBuffer(obj)</p> <p>.poolSize</p> <p>buf1.compare(buf2)</p> <p>.concat()</p> <p>.copy()</p> <p>.slice(start,[end])</p> <h3 id="stream-流"><a href="#stream-流" aria-hidden="true" class="header-anchor">#</a> stream 流</h3> <ol><li><p>控制台输出</p> <p>process.stdin.on('data/readable')</p> <p>process.stdin.read()</p> <p>process.stdout.write()</p></li> <li><p>在 fs 中，createReadStream/createWriteStream</p> <p>rs.pipe(ws)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;./readfs.text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ws 没有open end，有finish</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>Transform 转换流</p> <p>使用 crypto</p></li></ol> <h3 id="crypto-加密"><a href="#crypto-加密" aria-hidden="true" class="header-anchor">#</a> crypto 加密</h3> <p>.pbkdf2(password,salt,)</p> <p>.privateDecrypto()</p> <p>.publicDecrypto()</p> <h3 id="express"><a href="#express" aria-hidden="true" class="header-anchor">#</a> express</h3> <ul><li>req</li></ul> <p>.params: dynamic router parameters</p> <p>.query: get method args</p> <p>.body: post method args</p> <ul><li>res</li></ul> <p>.send()</p> <p>.sendFile(path, [options, fn])</p> <p>.header</p> <p>.json()</p> <p>.jsonp</p> <p>.render(view, [locals], callback)</p> <p>.status()</p></div> <!----> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <div class="valine-wrapper" data-v-0162251c><div id="valine" data-v-0162251c></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.58ea3618.js" defer></script><script src="/assets/js/4.e18734fe.js" defer></script><script src="/assets/js/1.5515fbc7.js" defer></script><script src="/assets/js/20.523ad5a5.js" defer></script>
  </body>
</html>
